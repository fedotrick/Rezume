# Неделя 3: Хранимые процедуры, триггеры и расширенный T-SQL

## Обзор недели

Третья неделя программы посвящена углубленному изучению разработки хранимых процедур, триггеров, обработке XML и управлению динамическим T-SQL. Материалы недели показывают, как строить надежную серверную логику, автоматизировать проверку данных и ускорять сложные сценарии обработки в SQL Server.

## Структура материалов

| Категория | Описание | Файлы |
|-----------|----------|-------|
| **Лекции** | Шаг за шагом разбираем синтаксис, шаблоны и best practices для процедур, триггеров, расширенных конструкций T-SQL и XML | `lectures/Lecture1_Stored_Procedures.md`<br>`lectures/Lecture2_Triggers.md`<br>`lectures/Lecture3_TSQL_Advanced.md`<br>`lectures/Lecture4_XML_Processing.md` |
| **Практические задачи** | 5 комплексных заданий c заготовками кода и ожидаемыми результатами | `practical-tasks/Task1_Stored_Procedure_Development.md`<br>`practical-tasks/Task2_Trigger_Change_Logging.md`<br>`practical-tasks/Task3_Portfolio_Calculation_Procedure.md`<br>`practical-tasks/Task4_XML_Processing_ETL.md`<br>`practical-tasks/Task5_Dynamic_Search_Procedure.md` |
| **SQL-скрипты** | Готовые шаблоны процедур, триггеров и вспомогательных объектов | `scripts/week3_procedures_triggers_examples.sql` |
| **Best Practices** | Свод рекомендаций по оптимизации, тестированию и сопровождению объектов недели | `BEST_PRACTICES_AND_RECOMMENDATIONS.md` |

## Основные результаты обучения

1. **Проектирование и разработка процедур** с параметрами INPUT/OUTPUT, управлением транзакциями, TRY/CATCH и логированием.
2. **Создание триггеров** для аудита, контроля целостности и автоматизации, включая INSTEAD OF и AFTER.
3. **Использование расширенного T-SQL**, включая динамический SQL, операторы управления потоком, курсоры и обработку ошибок.
4. **Работа с XML**: генерация, парсинг, трансформация и оптимизация производительности XML-процессов.
5. **Повышение надежности** за счет шаблонов тестирования, профилирования и документирования логики уровня БД.

## Рекомендуемая последовательность обучения

1. Прочитайте лекции в указанном порядке, выполняя приведенные примеры в собственной среде.
2. Проработайте задачи, используя готовые заготовки и подсказки для самопроверки.
3. Изучите SQL-скрипты, чтобы сравнить собранные решения с эталонными шаблонами.
4. Завершите изучение изучением рекомендаций по производительности и сопровождению.

## Предварительные требования

- Свободное владение материалом Недели 1 и Недели 2.
- Понимание транзакций, индексов и оконных функций.
- Доступ к SQL Server 2019+ или Azure SQL Database.

## Практическая лаборатория

Все задания ориентированы на финансовую предметную область: инвестиционные портфели, транзакции и торговые операции. Скрипты в каталоге `scripts/` содержат вспомогательные таблицы и логику для быстрого развёртывания учебного стенда.

## Связанные материалы

- Неделя 1: `/week1-sqlserver-basics`
- Неделя 2: `/week2-advanced-sql-queries`

## Обратная связь

Если вы нашли опечатку или хотите предложить улучшение, создайте issue в репозитории или отправьте pull request с описанием изменений.
